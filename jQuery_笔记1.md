# jQuery

## 动态创建元素

jQuery中如何创建节点呢?

用html();和$();

**html();**设置或者获取内容,此方法不设置参数,会获取到元素的所有内容.    设置内容:html()方法给参数会把原来的内容覆盖 ,如果设置的内容中有标签,会解析标签(相当于innerHTML);

**$();**确实能创建元素,但是创建的元素只存在于文件中,如果要在页面上显示,就要**追加节点**,用append();添加.

```javascript
$(function(){ 
let $link = $('<a href="#">内容<a>');
    $('div').append($link);
  });
```

**遍历数组用itar,遍历对象用itin**

#### 生成表格案例

```javascript
//遍历数组,有多少个元素就有多少个tr,有多少个kv就有多少个td
$('#one').click(function () {
    for (let i = 0; i < data.length; i++){
        let $tr = $("<tr><td>"+data[i]['name']+"</td><td>"+data[i]['url']+"</td><td>"+data[i]['type']+"</td></tr>"); //用$()创建元素
        $('#bodyData').append($tr); //用append添加
    }
});
//不过这个有点错误 我发现不了错在哪,td展示不出来
```

## 添加节点方式

#### 1.append():

格式:**父元素.append(子元素);**剪切,作为最后一个子元素添加.

例:1.1新创建一个li标签,添加到ul中作为最后一个元素;  1.2把ul1里的li标签添加到ul1里,此时这个标签剪切后做为最后一个子元素添加  1.3把ul2中的li标签添加到ul1里,此时这个li标签被剪切后作为ul1最后一个子元素被添加

#### 2.prepend():

同append,只是剪切后的元素被作为第一个子元素添加;

#### 4.before():

例:新建一个div,$divNew(元素B),格式:**元素A.before(元素B);**//吧元素B插入到元素A的前面,是兄弟元素之间的添加.

#### 3.after():

同before(),after是把元素B 插入到元素A的后面,兄弟元素之间的添加.

#### 5.appendTo():

格式:**子元素.appendTo(父元素);**//把子元素作为父元素的最后一个子元素添加

##### 城市选择案例

> ==multiple 属性==规定输入字段可选择多个值。如果使用该属性，则字段可接受多个值。

> <optgroup> 标签定义选项组。==**optgroup 元素**==用于组合选项。当您使用一个长的选项列表时，对相关的选项进行组合会使处理更加容易。也就是说是分组的,用来定义层级.

> option标签的==selected 属性==规定在页面加载时预先选定该选项。被预选的选项会显示在下拉列表最前面的位置。属性选择器

## 清空节点与移除节点

#### empty()清空

用html("")也可以清空,但是不安全,可能会造成内存泄漏.因为清空了内容但是绑定的事件还在   用empty()不仅仅清空了元素,还清空元素上绑定的事件

#### remove()移除

自己销毁自己  boom嗷自杀了

比如想移除ul标签,但是现在只有他的子标签li,此时就可以写`$('li').parent().remove();`

????  **.parent()也可以连着写多个!**此元素的父亲的父亲的父亲  嗯神奇

## 克隆节点clone(true/false)

克隆的节点只存在于内存中,如果要在页面上显示,就要被追加到页面上

也就是说`let $cloneDiv = $("#div").clone();`只是将#div克隆下来并给变量名

修改克隆节点的id:`$cloneDiv.attr('id',div2);`

clone()方法参数不管是true还是false,都会克隆到后代节点.默认false参数.true的意思是把事件也一并克隆.

## attr() 方法

设置或返回被选元素的属性值(除过布尔类型)。根据该方法不同的参数，其工作方式也有所差异。      如果元素原来没有这个属性,则会添加这个属性.也可以添加多个属性attr({属性1:属性值,属性2:属性值,属性3:属性值});

直接写attr('属性')则会获取属性;如果没有这个属性则获取到的是undefined

removeAttr();可以移除单个可以移除多个

## prop()方法

设置或返回被选布尔类型的属性值,操作布尔类型的属性

`. prop('checked',value);`

对于checked,selected,disabled这类boolean类型的属性来说只能用prop.

## val()方法

不给参数就是获取这个元素的值,给参数就是设置值.

## jQuery中获取/设置宽高

#### width()和height()

$().width(100);带参数表示设置宽度  $().height();不带参数表示获取高度

$(window).width();  $(window).height(); 获取网页的可视宽高.

此种方法设置获取的宽高度,不包含内外边距和边框

#### innerWidth()/outerHeight()

innerWidth()/innerHeight()  方法返回元素的宽高度(包括内边距);

outerWidth()/outerHeight()  方法返回元素的宽高度(包括内边距和边框);

outerWidth(true)/outerHeight(true)  方法返回元素宽高度(包括内外边距和边框).

#### 与css()方法的区别

css()获取的是一个带px单位的宽高度(内容宽高度).width()/height()获取的是纯数字,不带单位的

##  offset()和position()

offset()方法会设置或返回被选元素**相对于文档**(document)的偏移坐标。offsetTop

position()方法会设置或返回被选元素**相对于定位父级**的偏移坐标。

## scrolltop()和scrollLeft()

设置或获取页面被卷曲的高度/宽度,也就是垂直滚动条的位置.

$(window).scrolltop();和$(window).scrollLeft(); 获取页面被卷曲的高/宽度.

> ==confirm() 方法==用于显示一个带有指定消息和 OK 及取消按钮的对话框。如果用户点击确定按钮，则 confirm() 返回 true。如果点击取消按钮，则 confirm() 返回 false。在用户点击确定按钮或取消按钮把对话框关闭之前，它将阻止用户对浏览器的所有输入。在调用 confirm() 时，将暂停对 JavaScript 代码的执行，在用户作出响应之前，不会执行下一条语句。

## jQuery事件

#### 发展历程

简单事件绑定--bind事件绑定--delegate事件绑定--on事件绑定(推荐)

简单事件绑定:click(单击事件) mouseenter(鼠标进入事件)mouseleave(鼠标离开事件).缺点不能同时注册多个事件

bind事件绑定:第一个参数:事件类型,第二个参数:事件处理方法.  `$('p').bind('click mouseenter',function(){//事件响应方法})`    缺点是不支持动态事件绑定,支持同时注册多个事件

delegate注册委托事件:支持同时注册也支持动态绑定.

#### ==on==注册事件

jQuery1.7后,统一使用on注册事件

##### on注册简单事件

`$(selector).on('click',function(){ });`表示给$(selector)绑定事件并且由自己触发,不支持动态绑定(注册). 

**什么是动态绑定?**就比如你给div注册事件,你又新创建了一个div,此时新创建的div是没有这个注册事件的,所以说不支持动态注册.

要注册多个事件时`$('#one').on({'click':function(){},`

​                                                    ` 'mouseenter':function(){} });`

##### on注册事件委托

`$(selector).on('click','.get,div',function(){ });`   表示给$(selector)绑定代理事件,必须是它的**内部元素**.get/div才能触发这个事件,支持动态绑定.

#### 事件解绑

.unbind()/.unbind('事件')方式,解绑所有/指定事件,不推荐使用

.undelegate()/.undelegate('事件')方式,解绑所有delegate事件/指定事件,不推荐

**.off()/.off('事件')**方式,**解绑匹配元素的**所有事件/指定事件,推荐使用.

#### 触发事件

1.当条件满足,触发事件.  比如说 ,我不想一点击就触发,我想双击触发,就可以设置一个i++,当if(i == 2),点击满两次时再触发事件.

感觉就是本来用事件触发,现在用代码触发

$(selector).trigger('事件'); 触发这个事件.

2.触发自定义事件,使用触发器,也就是trigger()

**confirm() 方法**用于显示一个带有指定消息和 OK 及取消按钮的对话框。如果用户点击确定按钮，则 confirm() 返回 true。如果点击取消按钮，则 confirm() 返回 false。

#### jQuery事件对象

什么是事件对象?注册一个事件,系统就会帮我们**生成一个对象记录这个事件触发时的一些信息**,比如触发事件的时候有没有按住某个键,比如触发这个事件的时候的一些坐标信息.

JavaScript事件对象的属性：格式：==event.属性==。event代表事件的状态，例如触发event对象的元素、鼠标的位置及状态、按下的键等等；　event对象(简写e)只在事件发生的过程中才有效。事件通常与函数结合使用，**用事件参数对象e来获取==function(e)==.**函数不会在事件发生前被执行！

jQuery事件对象其实就是js事件对象的一个封装,处理了兼容性.

事件对象中常用的三个坐标:(均指的是触发事件那一点距离的值)

**screenX和screenY** 距离屏幕最左上角的值;**clientX和clientY** 距离页面(可视区)左上角的位置(忽视滚动条);**pageX和pageY** 距离页面最顶部的左上角的位置(会计算滚动条的距离,是固定定位top,left)

**event.stopPropagation()** 阻止事件冒泡行为.  **事件冒泡:**事件开始时由最具体的元素接收，然后逐级向上传播到较为不具体的节点(document).      就比如说这个按钮存在于div中,是div的子元素,按钮设定alert事件,div也有alert事件,此时由于事件冒泡的原因,按钮的事件执行完毕后div的时间也会执行,现在不想让div的事件执行,就要阻止冒泡行为.       

**event.preventDefault()** 阻止浏览器默认行为

**return false;**既能阻止事件冒泡,又能阻止浏览器默认行为

**event.keyCode** 获取按下的键盘代码

## 链式编程与end()

什么时候可以链式编程?   如果给元素调用一个方法,这个方法有返回值,并且返回的是一个jQuery对象,这时候就可以继续链式编程;数值不能点出jQuery对象!数值不行.

**end();** 筛选选择器会改变jQuery对象的dom对象,想恢复到**上一次的状态**,并且返回匹配元素之前的状态.他是个jQuery方法,所以也需要一个jQuery对象才能继续链式.

当返回的jQuery对象不是我们想要的对象时,不用继续写了, 此时可以加一个end()方法,恢复到匹配这个元素之前的状态,然后继续进行下一步操作.

## each()方法与隐式迭代

到底什么是隐式迭代?????隐式迭代有什么作用??

获取元素P(dom对象)，也就是说获得的应该是一个集合。我们知道设置集合中元素的属性，那必须的迭代啊（就是遍历一下啊）.但是==Jquery中不需要遍历可以直接设置==。 为啥呢？ 这就是**==隐式迭代==**.

但是说如果想给元素p里每个对象都设置不同的值,此时就要用到each()方法

`each(function(index,element){});`两个参数:index--表示当前元素再所有匹配元素中的索引号;element--表示当前元素(dom对象).

## jQuery库和插件

#### 库

如何查看jQuery版本? 不能通过文件名查看

1-jQuery.fn.jquery;     2-jQuery.prototype.jquery;     3-$.fn.jquery;    4-$.prototype.jquery;

如果引入多个jQuery文件,使用的$是哪一个版本的呢?

后面引入的jQuery文件会覆盖掉前面引入的jQuery文件.

多库冲突怎么办,如何共存?

$.noConflict()释放$的控制权.  $和jquery等价,如果同时引入两个文件,则释放$控制权给另一个文件,自己用jquery,两个文件就能同时用了.

也可以`var _$ = $.noConflict()`声明一个变量,做替代品使用.

如果此时写好代码,再多加了一个库,可以给代码外层加一个自执行函数`(function($){}(_$));`或者`(function(形参列表){})(实参列表);`,在这个自执行函数中,可以继续使用$(把$当做形参).

#### 插件

什么是插件? 用来做扩展功能的.

自己怎么封装插件?

1--给jQuery的原型添加方法:`(function($){$fn.方法=function(){this.对象('属性',属性值);return this;}(_$));`

先给最外层加自执行函数,然后$fn.方法=你所要加的方法内容.....最好再加一个`return this;`返回jQuery对象本身,就可以直接在封装好的插件里再添加别的jQuery对象

2--直接给jQuery添加方法